<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Matrix</title>
    <link href="style.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="content">
    <div class="size">
        <label for="size">
            Matrix: <input id="size" onkeyup="generate()" placeholder="rows x cols" style="text-align: center"
                           type="text" value="4 x 5">
        </label>
    </div>
    <br>
    <div id="table-container">
        <div style="text-align: center; margin: 8px">
            <button id="cal-button" onclick="calculate()">Calculate</button>
        </div>
    </div>
    <div class="result">
        <hr style="width: 100%">
        <table style="margin: 0 auto">
            <tr>
                <td>Sum of main-diagonal</td>
                <td>: <i id="main-diagonal"></i></td>
            </tr>
            <tr>
                <td>Sum of sub-diagonal</td>
                <td>: <i id="sub-diagonal"></i></td>
            </tr>
            <tr>
                <td>Sum of even-elements</td>
                <td>: <i id="sum-even"></i></td>
            </tr>
        </table>
        <br>
        <div style="text-align: center">
            Elements that are common multiple of 3 and 5:
            <br>
            <i id="multiple-of-3-and-5"></i>
        </div>
    </div>
</div>
<script src="../num-lib.js"></script>
<script src="matrix-lib.js"></script>
<script src="matrix-input.js"></script>
<script>
    const sizeInput = document.getElementById("size");
    let table;
    let matrix;
    generate();
    calculate();

    function generate() {
        const button = document.getElementById("cal-button");
        const input = sizeInput.value;
        if (table) table.remove();
        if (isValidSizeInput(input)) {
            sizeInput.style.color = "black";
            const size = extractSize(input);
            matrix = new Matrix(size.rows, size.cols);
            generateInputTable();
            button.innerText = "Calculate";
        } else {
            sizeInput.style.color = "red";
            matrix = null;
            button.innerText = "Yo, wtf ???";
        }
    }

    function generateInputTable() {
        table = getInputTable(matrix);
        document.getElementById("table-container").prepend(table);
    }

    function calculate() {
        if (matrix) {
            const diagonal = sumDiagonal(matrix);
            const multipleOf3And5 = getMultipleOf3And5(matrix);
            document.getElementById("main-diagonal").innerText =
                diagonal ? diagonal.mainDiagonalSum.toString() : "not a square matrix";
            document.getElementById("sub-diagonal").innerText =
                diagonal ? diagonal.subDiagonalSum.toString() : "not a square matrix";
            document.getElementById("sum-even").innerText = sumEven(matrix).toString();
            document.getElementById("multiple-of-3-and-5").innerText =
                multipleOf3And5.length !== 0 ? multipleOf3And5.join(", ") : "(none)";
        } else {
            alert("What the fuck do u want me to calculate, bro?")
        }
    }
</script>
</body>
</html>
